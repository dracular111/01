-- ğŸ§¹ Cleanup cÅ© náº¿u script reload
if getgenv()._CLEANUP then
    pcall(getgenv()._CLEANUP)
end

-- ğŸ§© Module Cleanup riÃªng cho Lock-Fps
getgenv()._CLEANUP = function()
    if _G.FpsLoop then
        task.cancel(_G.FpsLoop)
        _G.FpsLoop = nil
        print("[Lock-Fps] ğŸ§¹ Cleaned old loop")
    end
end

-- âš™ï¸ Má»©c FPS máº·c Ä‘á»‹nh (náº¿u khÃ´ng cÃ³ cáº¥u hÃ¬nh tá»« xa)
local DEFAULT_FPS = 5

-- ğŸ”§ Cho phÃ©p Ä‘iá»u chá»‰nh tá»« xa báº±ng getgenv().FPS_TARGET
-- VÃ­ dá»¥: getgenv().FPS_TARGET = 30  â†’ Ä‘á»•i FPS ngay
local function getCurrentFps()
    return tonumber(getgenv().FPS_TARGET) or DEFAULT_FPS
end

-- ğŸ” VÃ²ng láº·p chÃ­nh
_G.FpsLoop = task.spawn(function()
    local lastFps = nil
    while task.wait(1) do
        local current = getCurrentFps()
        if current ~= lastFps then
            setfpscap(current)
            print("[Lock-Fps] ğŸ¯ FPS locked at:", current)
            lastFps = current
        end
    end
end)

print("[Lock-Fps] âœ… Module started (remote control ready)")
