local HttpService = game:GetService("HttpService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- âš™ï¸ Cáº¥u hÃ¬nh
local chiThreshold = 300
local webhookUrl = "https://discord.com/api/webhooks/1399413705195655279/-cbC1wOWk3QEBdoUUdHf7YPbsCsgt1g0cEDr6BRslBVZ_sWCDwruUS4pQvZ6dEG_xmnw"
local waitTime = 600 -- kiá»ƒm tra má»—i 10 phÃºt
local totalBought = 0

-- ğŸ“¦ Remote
local buyRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("BuyZenSeedPack")
local openRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("OpenSeedPack")

-- ğŸ”¢ Láº¥y Chi hiá»‡n táº¡i
local function getChi()
	local chiStat = player:FindFirstChild("Chi") or player:WaitForChild("Chi")
	return chiStat and chiStat.Value or 0
end

-- ğŸŒ Gá»­i webhook
local function sendWebhook(title, packName, plantName, chiLeft)
	local message = string.format(
		"âœ… **%s**\nğŸ“¦ Pack: `%s`\nğŸŒ± Seed nháº­n: `%s`\nğŸ§˜ Chi cÃ²n láº¡i: `%d`\nğŸ• %s\nğŸ“Š Tá»•ng Ä‘Ã£ mua: `%d`",
		title, packName, plantName or "KhÃ´ng xÃ¡c Ä‘á»‹nh", chiLeft, os.date("%Y-%m-%d %H:%M:%S"), totalBought
	)

	local payload = {
		["username"] = "Zen Auto Bot",
		["content"] = message
	}

	pcall(function()
		HttpService:PostAsync(
			webhookUrl,
			HttpService:JSONEncode(payload),
			Enum.HttpContentType.ApplicationJson
		)
	end)
end

-- ğŸ§ª HÃ m mua vÃ  má»Ÿ gÃ³i
local function tryBuyAndOpen()
	local chi = getChi()
	if chi > chiThreshold then
		print("[ZenAuto] Äá»§ Chi ("..chi.."), Ä‘ang mua gÃ³i...")

		-- Mua gÃ³i
		buyRemote:FireServer("Chi")
		totalBought += 1

		wait(2)

		-- Má»Ÿ gÃ³i (giáº£ Ä‘á»‹nh pack luÃ´n tÃªn "Zen Seed Pack")
		local result = nil
		local success, err = pcall(function()
			result = openRemote:InvokeServer("Zen Seed Pack") -- tráº£ vá» tÃªn seed
		end)

		-- Láº¥y tÃªn cÃ¢y nháº­n Ä‘Æ°á»£c
		local seedName = result or "KhÃ´ng rÃµ"

		-- Gá»­i webhook
		sendWebhook("ÄÃ£ mua & má»Ÿ Zen Seed Pack", "Zen Seed Pack", seedName, getChi())
	else
		print("[ZenAuto] KhÃ´ng Ä‘á»§ Chi ("..chi..")")
	end
end

-- ğŸ” Láº·p
while true do
	pcall(tryBuyAndOpen)
	wait(waitTime)
end
